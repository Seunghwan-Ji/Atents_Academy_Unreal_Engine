1. BP_Character -> 메시 컴포넌트 -> 디테일 -> 에니메이션 -> 애니메이션 모드 -> Use Animation Blueprint 선택.
2. 콘텐츠 드로어 -> 추가 -> 애니메이션 -> 애니메이션 블루프린트 -> 특정 스켈레톤 -> "SK_Mannequin" 에셋 선택 -> 생성.
- 이름 예시: ABP_Character
3. 콘텐츠 드로어 -> ABP_Character 선택한 채로 유지.
4. BP_Character -> 메시 컴포넌트 -> 애니메이션 -> 애님 클래스 오른쪽에 왼쪽 화살표 버튼 클릭 시 선택해둔 ABP_Character 애니메이션으로 지정됨.
- 반대로, 지정된 애니메이션이 콘텐츠 드로어 내에서 어느 경로에 있는지 보려면 애님 클래스 오른쪽에 탐색기 버튼을 누르면 경로로 이동됨.
5. ABP_Character -> AnimGraph 탭 -> 노드 추가 -> State Machine.
- 노드 이름 예시: Tutorial
6. State Machine 노드와 Out Pose 노드를 서로 핀 연결.
- State Machine 노드에서 애니메이션 포즈를 출력해서 Output 에 입력해주게됨.
7. Tutorial(State Machine) 노드 더블클릭 -> 우측 하단 에셋 브라우저 탭 -> Unarmed_Idle -> 그래프에 드래그 배치.
- 노드 이름 예시: Idle
8. Entry 노드의 실행핀을 끌어서 Idle 노드 가장자리에 놓아서 연결.
9. Idle 노드 더클블릭 -> Unarmed_Idle 노드 선택 -> 디테일 -> 애니메이션 루프 체크.
- 애니메이션을 무한 재생함.
10. Tutorial 탭 -> 에셋 브라우저에서 다음 노드들 드래그 배치: Unarmed_Walk, Unarmed_Run.
- 노드 이름 예시: Walk, Run
11. Idle, Walk, Run 순으로 간선 연결 후 역방향으로 또 연결.
12. 이벤트 그래프 탭으로 이동.
- 이벤트 블루프린트 업데이트 애니메이션 노드는 매 프레임 업데이트가 수행될 때 실행할 내용임.
- 트라이 겟 폰 오너 노드는 이 애니메이션 블루프린트 클래스를 사용하는 사용자(BP_Character)를 가져올 수 있음.
13. Try Get Pawn Owner 노드의 실행핀을 당겨 멤버 함수 노드 검색 -> Get Velocity 추가.
- Idle, Walk, Run 상태 전환은 이 애니메이션 블루프린트 클래스를 사용하는 BP_Character 의 속력 변화를 기준으로 함.
- 속력과 속도 차이
- 속력: 어느 정도의 빠르기로 이동중인지 뜻함.
- 속도: 어느 방향으로 이동하는지까지 포함함.
14. Get Velocity 의 출력핀을 당겨 노드 검색 -> Vector Length XY 추가.
15. Vector Length XY 의 출력핀을 변수로 승격후 이벤트 블루프린트 업데이트 애니메이션 노드와 실행핀 연결.
- 변수 이름 예시: Speed
16. AnimGraph -> Tutorial 진입.
17. 각 상태들이 서로 연결된 간선 주변에 양방향 화살표 버튼이 있는데 더블 클릭하면 조건을 편집할 수 있음.
- 이 양방향 화살표 버튼을 트랜지션 룰 버튼이라고 부름.
18. Idle -> Walk 트랜지션 룰 버튼 더블클릭 -> Speed 변수 Get 노드 생성 후 이 노드의 출력핀을 당겨 연산자 노드 검색 -> '>'.
- 연산자 노드에서 좌항은 위쪽 핀, 우항은 아랫쪽 핀임.
19. 조건을 스피드가 0보다 클 때로, 연산자 노드의 출력핀을 Result 노드에 연결.
20. Walk -> Run 조건 편집 그래프 -> 이번에도 같은 방식으로 노드를 추가하고, 조건을 스피드가 300보다 클 때로.
21. Run -> Walk: 스피드가 300보다 작거나 같을 때로.
22. Walk -> Idle: 스피드가 0과 같을 때로.
23. Tutorial 에서 각 상태들을 더블 클릭하고 에셋 노드의 디테일에서 애니메이션 루프가 체크되어 있는지 확인.
24. BP_Character -> 캐릭터 무브먼트 컴포넌트 -> 디테일 -> 캐릭터 무브먼트(회전 세팅) -> 무브먼트 방향으로 회전 조정 체크.
- 캐릭터가 이동하고 있는쪽으로 캐릭터를 회전시켜주는 기능.
- 이 기능을 사용하려면 클래스 디폴트 -> 디테일 -> 폰 -> 컨트롤러 회전 요 사용을 체크 해제해야함.
- 캐릭터 무브먼트 컴포넌트에서는 캐릭터가 이동하는 방향으로 카메라를 회전시키려고 하는데, 디폴트 클래스에서 컨트롤러 방향으로 다시 회전시키기 때문임.